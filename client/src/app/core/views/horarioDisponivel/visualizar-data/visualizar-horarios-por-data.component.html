<div class="dashboard-container">
  <!-- HEADER DA LISTA -->
  <mat-card class="no-card-appearence mb-4">
    <mat-card-header>
      <div class="d-flex justify-content-between align-items-center w-100">
        <div>
          <mat-card-title class="text-primary m-0">
            <mat-icon class="icon-destaque icon-header">schedule</mat-icon>
            Horários Disponíveis
          </mat-card-title>
          <mat-card-subtitle class="m-0">
            {{ dataFormatada }}
          </mat-card-subtitle>
        </div>
      </div>
    </mat-card-header>
  </mat-card>

  <!-- LOADING -->
  <div *ngIf="carregando" class="text-center py-5">
    <mat-spinner diameter="50" class="mx-auto"></mat-spinner>
    <p class="text-secondary mt-3">Carregando horários...</p>
  </div>

  <!-- LISTA DE HORÁRIOS -->
  <div *ngIf="!carregando && horarios.length > 0" class="row g-3 mb-4">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let horario of horarios">
      <mat-card class="horario-card no-card-appearence"
                [class.card-ativo]="horario.status"
                [class.card-inativo]="!horario.status"
                [matMenuTriggerFor]="menuAcoes">
        <!-- HEADER DO CARD -->
        <div class="card-header d-flex align-items-center justify-content-between p-3 border-bottom border-default">
          <div class="d-flex align-items-center gap-2">
            <mat-icon class="icon-secundario icon-horario">schedule</mat-icon>
            <span class="horario-texto text-primary fw-bold">{{ horario.horario }}</span>
          </div>
        </div>

        <!-- CONTEÚDO DO CARD -->
        <mat-card-content class="p-3">
          <div class="status-badge"
               [class.badge-disponivel]="horario.status"
               [class.badge-indisponivel]="!horario.status">
            <mat-icon class="icon-badge">
              {{ horario.status ? 'check_circle' : 'cancel' }}
            </mat-icon>
            <span class="badge-texto">
              {{ horario.status ? 'Aberto' : 'Fechado' }}
            </span>
          </div>
        </mat-card-content>

        <mat-divider></mat-divider>

        <!-- MENU DE AÇÕES -->
        <mat-menu #menuAcoes="matMenu" class="menu-horarios">
          <ng-container *ngIf="horario.status">
            <button mat-menu-item
                    *appHasPermission="Permission.EMPLOYEE_PERMISSION"
                    (click)="desativarHorario(horario)">
              <mat-icon>block</mat-icon>
              <span>Desativar</span>
            </button>
          </ng-container>
          <ng-container *ngIf="!horario.status">
            <button mat-menu-item
                    *appHasPermission="Permission.EMPLOYEE_PERMISSION"
                    (click)="ativarHorario(horario)">
              <mat-icon>check_circle</mat-icon>
              <span>Ativar</span>
            </button>
          </ng-container>
        </mat-menu>
      </mat-card>
    </div>
  </div>

  <!-- MENSAGEM VAZIA -->
  <mat-card *ngIf="!carregando && horarios.length === 0" class="no-card-appearence text-center py-5">
    <mat-card-content>
      <mat-icon class="icon-vazio">event_busy</mat-icon>
      <h3 class="text-secondary mt-3 mb-2">Nenhum horário encontrado</h3>
      <p class="text-secondary mb-4">Não há horários cadastrados para esta data.</p>
    </mat-card-content>
  </mat-card>

  <!-- BOTÃO VOLTAR -->
  <div class="d-flex justify-content-end mt-4">
    <button mat-raised-button class="btn-secundario" (click)="voltar()">
      <mat-icon>arrow_back</mat-icon>
      Voltar
    </button>
  </div>
</div>
