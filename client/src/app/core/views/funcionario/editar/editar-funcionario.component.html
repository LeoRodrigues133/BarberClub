<div class="dashboard-container">
  <mat-card class="no-card-appearence">

    <!-- HEADER -->
    <mat-card-header>
      <mat-card-title class="text-primary">Editar Funcionário</mat-card-title>
      <mat-card-subtitle>Atualize as informações necessárias</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="editar()">

        <!-- GRID ROW 1: Nome + Cargo -->
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>Nome Completo</mat-label>
            <input matInput formControlName="nome" placeholder="Ex: João da Silva">
            <mat-icon matPrefix class="icon-destaque">person</mat-icon>

            <mat-error *ngIf="nome?.errors?.['required']">Nome obrigatório</mat-error>
            <mat-error *ngIf="nome?.errors?.['minlength']">Mínimo de 3 caracteres</mat-error>
            <mat-error *ngIf="nome?.errors?.['maxlength']">Máximo de 50 caracteres</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Cargo</mat-label>
            <mat-select formControlName="cargo">
              <mat-option *ngFor="let cargo of cargosOptions" [value]="cargo.valor">
                {{ cargo.label }}
              </mat-option>
            </mat-select>
            <mat-icon matPrefix class="icon-destaque">work</mat-icon>
          </mat-form-field>
        </div>

        <!-- GRID ROW 2: Apelido + Aviso -->
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>Apelido</mat-label>
            <input matInput formControlName="nomeApresentacao" placeholder="Ex: Leo" />
            <mat-icon matPrefix class="icon-destaque">person</mat-icon>

            <mat-error *ngIf="nomeApresentacao?.errors?.['minlength']">Mínimo de 3 caracteres</mat-error>
            <mat-error *ngIf="nomeApresentacao?.errors?.['maxlength']">Máximo de 20 caracteres</mat-error>
          </mat-form-field>

          <mat-label for="aviso">

            <p id="aviso">
              O apelido não é obrigatório, caso seja preenchido
              o nome de apresentação para a aplicação e clientes será prioritário.
            </p>
          </mat-label>
        </div>

        <!-- GRID ROW 3: Username + Email -->
        <div class="form-grid">

          <mat-form-field appearance="outline">
            <mat-label>E-mail</mat-label>
            <input matInput type="email" formControlName="email">
            <mat-icon matPrefix class="icon-destaque">email</mat-icon>

            <mat-error *ngIf="email?.errors?.['required']">Obrigatório</mat-error>
            <mat-error *ngIf="email?.errors?.['email']">Email inválido</mat-error>
          </mat-form-field>
          <div class="cpf-wrapper">
            <app-cpf-input formControlName="cpf" label="CPF" placeholder="000.000.000-00">
            </app-cpf-input>

            <mat-error *ngIf="cpf?.value" class="dicas cpf-dicas">

              <span [class.valido]="!cpf?.hasError('semFormatacao')" [class.invalido]="cpf?.hasError('semFormatacao')">
                <mat-icon>{{ !cpf?.hasError('semFormatacao') ? 'check_circle' : 'cancel' }}</mat-icon>
                Formatação incorreta
              </span>

              <span [class.valido]="!cpf?.hasError('cpfVazio')" [class.invalido]="cpf?.hasError('cpfVazio')">
                <mat-icon>{{ !cpf?.hasError('cpfVazio') ? 'check_circle' : 'cancel' }}</mat-icon>
                CPF obrigatório
              </span>

              <span [class.valido]="!cpf?.hasError('cpfCurto')" [class.invalido]="cpf?.hasError('cpfCurto')">
                <mat-icon>{{ !cpf?.hasError('cpfCurto') ? 'check_circle' : 'cancel' }}</mat-icon>
                CPF muito curto
              </span>

            </mat-error>
          </div>

        </div>

        <!-- ACTION BUTTONS -->
        <div class="form-actions">
          <a mat-button routerLink="/employees/listar" class="btn-outline-secundario">
            <mat-icon>arrow_back</mat-icon>
            Cancelar
          </a>

          <button mat-raised-button class="btn-destaque" type="submit">
            <mat-icon>save</mat-icon>
            Salvar Alterações
          </button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>
